<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Camping-Car Maroc - DÃ©couvrez le DÃ©sert</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }

  body {
    background-color: #f5f7f9;
    color: #333;
    height: 200vh; /* test scroll */
  }

  /* --- Bouton Toggle --- */
  #chat-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #27ae60;
    color: white;
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 28px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: background 0.3s, transform 0.2s;
    z-index: 1000;
  }
  #chat-toggle:hover {
    background: #219653;
    transform: scale(1.1);
  }

  /* --- Container du chat --- */
  .chat-container {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 350px;
    max-height: 500px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    display: none;
    flex-direction: column;
    overflow: hidden;
    animation: slideIn 0.3s ease-out;
    z-index: 999;
  }
  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  .chat-header {
    background: linear-gradient(135deg, #d35400, #e67e22);
    color: white;
    padding: 12px;
    font-size: 1.2rem;
    text-align: center;
  }

  .chat-box {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    background: #fafafa;
  }

  .user-message, .bot-message {
    margin-bottom: 10px;
    padding: 10px 14px;
    border-radius: 18px;
    max-width: 80%;
  }
  .user-message {
    background: #3498db;
    color: white;
    margin-left: auto;
    border-bottom-right-radius: 5px;
  }
  .bot-message {
    background: #e9ebee;
    color: #333;
    margin-right: auto;
    border-bottom-left-radius: 5px;
  }

  /* Input */
  .input-container {
    display: flex;
    padding: 10px;
    border-top: 1px solid #eee;
    background: white;
  }
  .input-container input {
    flex: 1;
    padding: 10px 15px;
    border: 1px solid #ccc;
    border-radius: 24px;
    outline: none;
    font-size: 1rem;
  }
  .input-container button {
    background: #27ae60;
    color: white;
    border: none;
    border-radius: 50%;
    width: 42px;
    height: 42px;
    margin-left: 10px;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.3s, transform 0.2s;
  }
  .input-container button:hover {
    background: #219653;
    transform: scale(1.05);
  }
</style>
</head>
<body>

<!-- Bouton flottant -->
<button id="chat-toggle">ğŸ’¬</button>

<!-- Chatbox -->
<div class="chat-container" id="chat-container">
  <div class="chat-header">ğŸ¤– Camping-Car Maroc</div>
  <div id="chat-box" class="chat-box">
    <div class="bot-message">Bonjour ğŸ‘‹ ! Posez-moi vos questions sur nos voyages ğŸšğŸŒ</div>
  </div>
  <div class="input-container">
    <input type="text" id="user-input" placeholder="Ã‰crivez ici...">
    <button onclick="sendMessage()">â¡</button>
  </div>
</div>

<script>
  // BASE SE CONAISSANCE
  const answers = [
    { keywords: ["bonjour", "salut", "hey"], reply: "Bonjour ! ğŸŒµ PrÃªt Ã  dÃ©couvrir les merveilles du dÃ©sert marocain en camping-car ? Je suis lÃ  pour vous aider !" },
    { keywords: ["merci", "thanks"], reply: "Avec plaisir ! N'hÃ©sitez pas Ã  me poser d'autres questions sur le dÃ©sert ou nos services. ğŸš" },
    { keywords: ["aide", "support"], reply: "Je suis lÃ  pour vous aider sur toutes vos questions concernant la location de camping-car et le voyage au Maroc, particuliÃ¨rement dans le dÃ©sert !" },

    // DÃ©sert et zones dÃ©sertiques
    { keywords: ["dÃ©sert", "sahara", "dunes"], reply: "Le dÃ©sert du Sahara au Maroc est une expÃ©rience magique ! ğŸŒµ Nous proposons des circuits spÃ©cialement conÃ§us pour le dÃ©sert avec camping-cars adaptÃ©s. Voulez-vous que je vous parle de nos offres spÃ©ciales dÃ©sert ?" },
    { keywords: ["merzouga", "erg chebbi"], reply: "Merzouga et ses magnifiques dunes d'Erg Chebbi sont incontournables ! ğŸª Nos circuits incluent souvent une nuit en bivouac, un dÃ®ner berbÃ¨re et une balade Ã  dos de chameau au coucher du soleil. Je vous recommande notre 'ExpÃ©rience DÃ©sert Complet' de 7 jours !" },
    { keywords: ["zagora", "mhamid"], reply: "Zagora et M'Hamid sont les portes du dÃ©sert ! ğŸš Nous avons des itinÃ©raires adaptÃ©s pour cette rÃ©gion, avec des camping-cars Ã©quipÃ©s pour les pistes dÃ©sertiques. Notre circuit 'DÃ©sert Authentique' est parfait pour cette zone." },
    { keywords: ["nuit dÃ©sert", "bivouac", "campement"], reply: "Passer une nuit dans le dÃ©sert est une expÃ©rience inoubliable ! â­ Nous organisons des nuits en bivouac avec tout le confort : tentes berbÃ¨res, dÃ®ner traditionnel, musique et contes autour du feu, et observation des Ã©toiles. Souhaitez-vous plus de dÃ©tails ?" },
    { keywords: ["chaleur", "Ã©tÃ©", "tempÃ©rature dÃ©sert"], reply: "En Ã©tÃ©, le dÃ©sert peut Ãªtre trÃ¨s chaud le jour (40-50Â°C) mais les nuits sont fraÃ®ches. ğŸœï¸ Nos camping-cars sont tous Ã©quipÃ©s de climatisation et de systÃ¨mes de ventilation. La meilleure pÃ©riode est d'octobre Ã  avril (20-25Â°C le jour)." },
    { keywords: ["piste", "4x4", "conduire dÃ©sert"], reply: "Conduire dans le dÃ©sert nÃ©cessite quelques prÃ©cautions. ğŸš™ Nous fournissons une formation de base et nos vÃ©hicules 4x4 sont spÃ©cialement Ã©quipÃ©s (pneus sable, Ã©quipement de rÃ©cupÃ©ration). Pour les zones difficiles, nous recommandons un guide local." },

    // Montagnes de l'Atlas
    { keywords: ["atlas", "montagne", "haut atlas"], reply: "Les montagnes de l'Atlas offrent des paysages Ã  couper le souffle ! ğŸ”ï¸ Notre circuit 'DÃ©sert & Montagnes' combine les dunes du Sahara et les sommets de l'Atlas. Les camping-cars sont Ã©quipÃ©s pour l'altitude et les routes de montagne." },
    { keywords: ["tizi n", "col", "passage"], reply: "Les cols de l'Atlas comme le Tizi n'Tichka sont spectaculaires mais exigent une conduite prudente. ğŸš Nos vÃ©hicules sont parfaitement entretenus pour ces routes et nous fournissons des conseils de conduite dÃ©taillÃ©s." },
    { keywords: ["neige", "hiver", "froid atlas"], reply: "En hiver, l'Atlas peut Ãªtre enneigÃ© et trÃ¨s froid la nuit. â„ï¸ Nos camping-cars ont un chauffage performant et sont isolÃ©s pour ces conditions. C'est une pÃ©riode magique pour photographier les paysages !" },

    // Services et rÃ©servation
    { keywords: ["rÃ©servation", "rÃ©server", "disponibilitÃ©"], reply: "Vous pouvez rÃ©server directement en ligne sur notre site ou par tÃ©lÃ©phone au +212 670 524 652. ğŸ“… Actuellement, il reste quelques vÃ©hicules pour les dÃ©parts dÃ©sert la semaine prochaine ! Souhaitez-vous que je vous envoie le lien de rÃ©servation ?" },
    { keywords: ["prix", "tarif", "coÃ»t", "combien"], reply: "Nos tarifs pour une semaine dans le dÃ©sert commencent Ã  850â‚¬ tout compris (hors vols). ğŸš Cela inclut le camping-car Ã©quipÃ©, l'assurance, l'assistance 24/7 et les conseils d'itinÃ©raire. Je peux vous proposer une offre dÃ©taillÃ©e !" },
    { keywords: ["inclut", "Ã©quipement", "services"], reply: "Tous nos camping-cars dÃ©sert sont Ã©quipÃ©s de : lit confortable, kitchenette, frigo, douche/toilette, chauffage/clim, panneaux solaires, GPS et kit de sÃ©curitÃ© dÃ©sert. ğŸ›Œ De plus, nous fournissons des cartes dÃ©taillÃ©es et un guide des meilleurs bivouacs !" },
    { keywords: ["assurance", "sÃ©curitÃ©", "dÃ©pannage"], reply: "Tous nos vÃ©hicules sont assurÃ©s tous risques avec assistance 24h/24. ğŸ†˜ En cas de problÃ¨me dans le dÃ©sert, nous avons un rÃ©seau de partenaires locaux pour intervenir rapidement. Nous fournissons aussi un tÃ©lÃ©phone satellite en option." },

    // ItinÃ©raires et conseils
    { keywords: ["itinÃ©raire", "circuit", "route"], reply: "Pour le dÃ©sert, nous recommandons : Marrakech - Ouarzazate - Zagora - M'Hamid - Erg Chigaga - Foum Zguid - retour. ğŸ—ºï¸ Ou la version nord : Marrakech - Gorges du Todra - Merzouga - Erfoud - VallÃ©e du Ziz - Midelt - Azrou - FÃ¨s. Je peux vous envoyer nos itinÃ©raires dÃ©taillÃ©s !" },
    { keywords: ["meilleure pÃ©riode", "quand"], reply: "La meilleure pÃ©riode pour le dÃ©sert est d'octobre Ã  avril : tempÃ©ratures diurnes agrÃ©ables (20-28Â°C) et nuits fraÃ®ches. ğŸŒ Ã‰vitez juillet-aoÃ»t si vous supportez mal la chaleur extrÃªme (peut dÃ©passer 45Â°C)." },
    { keywords: ["enfant", "famille", "enfant dÃ©sert"], reply: "Le dÃ©sert est une aventure magique pour les enfants ! ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Nos camping-cars familiaux ont assez de place et nous fournissons des Ã©quipements sÃ©curitÃ© adaptÃ©s. Beaucoup de familles reviennent enchantÃ©es de leur expÃ©rience." },
    { keywords: ["nourriture", "eau", "provisions"], reply: "PrÃ©voyez de l'eau en quantitÃ© (5L/personne/jour) et des provisions pour 2-3 jours. ğŸ¥« Dans les villages, vous trouverez des produits frais. Nous fournissons une liste des meilleurs marchÃ©s et Ã©piceries sur votre route." },
    { keywords: ["carburant", "essence", "diesel", "station"], reply: "Dans le dÃ©sert, faites le plein Ã  chaque occasion ! â›½ DerniÃ¨res stations importantes : Ouarzazate, Zagora ou Errachidia avant le dÃ©sert. PrÃ©voyez des jerricans supplÃ©mentaires pour les longs trajets isolÃ©s." },

    // Autres sujets
    { keywords: ["culture", "berbÃ¨re", "traditions"], reply: "Rencontrer les populations berbÃ¨res est un des trÃ©sors du voyage ! ğŸ¶ Nous pouvons organiser des rencontres authentiques avec des familles locales et des guides qui partageront leurs traditions et leur mode de vie dans le dÃ©sert." },
    { keywords: ["photo", "film", "instagram"], reply: "Le dÃ©sert est un paradis pour photographes ! ğŸ“¸ Lever/coucher de soleil sur les dunes, nuit Ã©toilÃ©e, villages de terre... Nous fournissons des conseils photo et une liste des meilleurs spots. Beaucoup de nos clients ont des photos primÃ©es !" },
    { keywords: ["cÃ©lÃ©britÃ©", "star", "film"], reply: "Beaucoup de films ont Ã©tÃ© tournÃ©s dans le dÃ©sert marocain : Star Wars, Gladiator, Prince of Persia... ğŸ¬ Nous proposons des circuits 'Tournage de films' qui vous emmÃ¨nent sur ces lieux mythiques !" },
    { keywords: ["faune", "flore", "animaux dÃ©sert"], reply: "Le dÃ©sert abrite une vie surprenante : fennecs, gerboises, lÃ©zards, scorpions (inoffensifs), et une variÃ©tÃ© d'oiseaux. ğŸŒµ La flore s'adapte Ã  l'ariditÃ© : cactus, palmiers dattiers, acacias... Nos guides vous aideront Ã  les repÃ©rer." },
    { keywords: ["mÃ¨re ocien", "atlantis", "bivouac plage", "spot sauvage", "wild camping"], reply: "La Plage MÃ¨re Ocien Atlantis est un spot de bivouac mythique et gratuit pour camping-cars ! ğŸ–ï¸ Une immense plage sauvage prÃ¨s de Guelmim, parfaite pour des nuits au son des vagues et des couchers de soleil inoubliables. Consultez nos coordonnÃ©es GPS exactes et les avis de la communautÃ©." },
    { keywords: ["circuit", "itinÃ©raire", "route", "Ã©tape", "road trip"], reply: "Nous avons conÃ§u des circuits optimisÃ©s pour camping-cars de Tanger au Sahara ! ğŸ—ºï¸ Des itinÃ©raires qui mÃªlent cÃ´te Atlantique, montagnes et dÃ©sert, avec toutes les infos pratiques : routes, durÃ©es, et les meilleurs spots de bivouac Ã  chaque Ã©tape." },
    { keywords: ["GPS", "coordonnÃ©es", "waypoint", "cartographie"], reply: "Tous nos spots et circuits sont disponibles avec des coordonnÃ©es GPS prÃ©cises (format DegrÃ©s DÃ©cimaux). ğŸ“ TÃ©lÃ©chargez nos fiches waypoints pour les intÃ©grer directement dans votre navigateur ou application de cartographie favorite." },
    { keywords: ["marrakech", "fÃ¨s", "agadir", "essaouira", "ville impÃ©riale"], reply: "Explorez les villes incontournables en camping-car ! ğŸ° Nous avons des conseils spÃ©cifiques pour se stationner et visiter Marrakech, FÃ¨s, Essaouira ou Agadir en toute sÃ©rÃ©nitÃ©, souvent avec des aires sÃ©curisÃ©es Ã  proximitÃ©." },
    { keywords: ["dÃ©sert", "erg chebbi", "dunes", "merzouga", "sahara"], reply: "Vivre le Sahara est une expÃ©rience magique. ğŸ« Nous vous guidons pour choisir entre un bivouac sauvage aux portes du dÃ©sert ou une excursion organisÃ©e avec nuit dans un campement au cÅ“ur des dunes de l'Erg Chebbi." },
    { keywords: ["pratique", "ravitaillement", "eau", "vidange", "gasoil"], reply: "Notre communautÃ© partage en temps rÃ©el toutes les infos pratiques ! â›½ Points de ravitaillement en eau, stations-service avec gasoil, stations de vidange... Toutes les adresses vÃ©rifiÃ©es pour voyager l'esprit lÃ©ger." },
    { keywords: ["communautÃ©", "forum", "entraide", "avis"], reply: "Rejoignez notre communautÃ© de passionnÃ©s ! ğŸ¤ Le forum est l'endroit parfait pour poser vos questions, partager votre expÃ©rience et lire les avis en temps rÃ©el sur les conditions des routes et des spots de bivouac." },
    { keywords: ["sÃ©curitÃ©", "conduire", "nuit", "conseils"], reply: "Voyager en sÃ©curitÃ© est notre prioritÃ©. ğŸ›¡ï¸ Nous prodiguons des conseils essentiels pour conduire au Maroc, choisir ses spots de nuit, et respecter les rÃ¨gles locales pour un voyage serein et mÃ©morable." }
  ];
  

  const chatBox = document.getElementById("chat-box");

  /* --- SIMILARITÃ‰ pour tolÃ©rer fautes --- */
  function similarity(a, b) {
    a = a.toLowerCase(); b = b.toLowerCase();
    if (a === b) return 1;
    if (a.length < 2 || b.length < 2) return 0;
    let same = 0;
    for (let i = 0; i < Math.min(a.length, b.length); i++) {
      if (a[i] === b[i]) same++;
    }
    return same / Math.max(a.length, b.length);
  }

  /* --- GÃ‰NÃ‰RATION DES RÃ‰PONSES --- */
  function generateSmartReply(userText) {
    const text = userText.trim().toLowerCase();
    if (!text) return "Veuillez poser une question sur le dÃ©sert marocain ou nos services.";

    const words = text.split(/\s+/);
    const matchedReplies = [];

    // Bloc spÃ©cial marketing dÃ©sert
    if (text.includes("dÃ©sert") || text.includes("sahara") || text.includes("merzouga") || text.includes("dunes")) {
      if (text.includes("circuit") || text.includes("itinÃ©raire") || text.includes("route")) {
        return "ğŸš Nous avons conÃ§u 3 circuits exceptionnels dans le dÃ©sert ! Notre 'ExpÃ©rience DÃ©sert Complet' de 7 jours est la plus demandÃ©e. ğŸ‘‰ Plus d'infos : https://maroccampingcar.com/";
      }
      if (text.includes("prix") || text.includes("tarif") || text.includes("coÃ»t")) {
        return "ğŸ’° Nos circuits dÃ©sert commencent Ã  490â‚¬ (4 jours) jusqu'Ã  1200â‚¬ (10 jours). Promo -15% cette semaine ! ğŸ‘‰ https://maroccampingcar.com/";
      }
      if (text.includes("rÃ©servation") || text.includes("rÃ©server")) {
        return "ğŸ‰ Pour rÃ©server votre aventure : 1) Cliquez sur 'RÃ©server' sur notre site ğŸ‘‰ https://maroccampingcar.com/reservation 2) Appelez +212 670 524 652. Il reste quelques vÃ©hicules disponibles !";
      }
    }

    // Recherche dans base
    for (let ans of answers) {
      for (let kw of ans.keywords) {
        for (let word of words) {
          if (word.includes(kw) || kw.includes(word) || similarity(word, kw) >= 0.6) {
            if (!matchedReplies.includes(ans.reply)) matchedReplies.push(ans.reply);
          }
        }
      }
    }

    if (matchedReplies.length === 0) {
      return "ğŸª Le dÃ©sert marocain vous tente ? Posez-moi vos questions sur Merzouga, les dunes du Sahara, les circuits ou la location de camping-car ! ğŸŒ https://maroccampingcar.com/";
    }

    return matchedReplies.map((r, i) => `ğŸ‘‰ RÃ©ponse ${i + 1}: ${r}`).join("\n\n") 
           + "\n\nğŸŒ Plus d'infos : https://maroccampingcar.com/";
  }

  /* --- EFFET TYPING --- */
  function typeMessage(message) {
    return new Promise(resolve => {
      const botDiv = document.createElement("div");
      botDiv.className = "bot-message";
      chatBox.appendChild(botDiv);

      let i = 0;
      const interval = setInterval(() => {
        botDiv.textContent += message.charAt(i);
        i++;
        chatBox.scrollTop = chatBox.scrollHeight;
        if (i >= message.length) {
          clearInterval(interval);
          resolve();
        }
      }, 30);
    });
  }

  /* --- ENVOI MESSAGE --- */
  async function sendMessage() {
    const input = document.getElementById("user-input");
    const userText = input.value.trim();
    if (!userText) return;

    const userDiv = document.createElement("div");
    userDiv.className = "user-message";
    userDiv.textContent = userText;
    chatBox.appendChild(userDiv);
    input.value = "";
    chatBox.scrollTop = chatBox.scrollHeight;

    const reply = generateSmartReply(userText);
    await typeMessage(reply);
  }

  /* --- RÃ‰SERVATION --- */
  function showBooking(tourName) {
    const userDiv = document.createElement("div");
    userDiv.className = "user-message";
    userDiv.textContent = "Je veux rÃ©server: " + tourName;
    chatBox.appendChild(userDiv);

    const reply = 
      "ğŸ‰ Pour rÃ©server '" + tourName + "':\n\n" +
      "ğŸ“… DÃ©parts : Dimanche prochain et Mercredi (8 jours)\n" +
      "ğŸš DisponibilitÃ© : " + (tourName.includes("Complet") ? "2 camping-cars" : "1 van") + "\n\n" +
      "ğŸ‘‰ RÃ©servation : https://maroccampingcar.com/reservation\n" +
      "ğŸ“ TÃ©lÃ©phone : +212 670 524 652";
    typeMessage(reply);
  }

  /* --- INTERACTIONS --- */
  document.getElementById("user-input").addEventListener("keypress", e => {
    if (e.key === "Enter") sendMessage();
  });
  const toggleBtn = document.getElementById("chat-toggle");
  const chatContainer = document.getElementById("chat-container");
  toggleBtn.addEventListener("click", e => {
    e.stopPropagation();
    chatContainer.style.display = (chatContainer.style.display === "flex") ? "none" : "flex";
  });
  document.addEventListener("click", e => {
    if (chatContainer.style.display === "flex" && !chatContainer.contains(e.target) && e.target !== toggleBtn) {
      chatContainer.style.display = "none";
    }
  });
</script>

</body>
</html>


